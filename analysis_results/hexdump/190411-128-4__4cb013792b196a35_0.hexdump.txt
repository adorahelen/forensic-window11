00000000  30 5c 72 a7 1b 6d fb fc  05 00 00 00 01 00 00 00  |0\r..m..........|
00000010  56 9f 1b ea 00 00 00 00  31 2f 2f 20 43 6f 70 79  |V.......1// Copy|
00000020  72 69 67 68 74 20 32 30  31 33 20 54 68 65 20 43  |right 2013 The C|
00000030  68 72 6f 6d 69 75 6d 20  41 75 74 68 6f 72 73 0a  |hromium Authors.|
00000040  2f 2f 20 55 73 65 20 6f  66 20 74 68 69 73 20 73  |// Use of this s|
00000050  6f 75 72 63 65 20 63 6f  64 65 20 69 73 20 67 6f  |ource code is go|
00000060  76 65 72 6e 65 64 20 62  79 20 61 20 42 53 44 2d  |verned by a BSD-|
00000070  73 74 79 6c 65 20 6c 69  63 65 6e 73 65 20 74 68  |style license th|
00000080  61 74 20 63 61 6e 20 62  65 0a 2f 2f 20 66 6f 75  |at can be.// fou|
00000090  6e 64 20 69 6e 20 74 68  65 20 4c 49 43 45 4e 53  |nd in the LICENS|
000000a0  45 20 66 69 6c 65 2e 0a  0a 2f 2a 2a 0a 20 2a 20  |E file.../**. * |
000000b0  40 66 69 6c 65 6f 76 65  72 76 69 65 77 0a 20 2a  |@fileoverview. *|
000000c0  20 54 68 69 73 20 69 73  20 61 20 63 6f 6d 70 6f  | This is a compo|
000000d0  6e 65 6e 74 20 65 78 74  65 6e 73 69 6f 6e 20 74  |nent extension t|
000000e0  68 61 74 20 69 6d 70 6c  65 6d 65 6e 74 73 20 61  |hat implements a|
000000f0  20 74 65 78 74 2d 74 6f  2d 73 70 65 65 63 68 20  | text-to-speech |
00000100  28 54 54 53 29 0a 20 2a  20 65 6e 67 69 6e 65 20  |(TTS). * engine |
00000110  70 6f 77 65 72 65 64 20  62 79 20 47 6f 6f 67 6c  |powered by Googl|
00000120  65 27 73 20 73 70 65 65  63 68 20 73 79 6e 74 68  |e's speech synth|
00000130  65 73 69 73 20 41 50 49  2e 0a 20 2a 0a 20 2a 20  |esis API.. *. * |
00000140  54 68 69 73 20 69 73 20  61 20 73 65 72 76 69 63  |This is a servic|
00000150  65 20 77 6f 72 6b 65 72  2c 20 73 6f 20 69 74 27  |e worker, so it'|
00000160  73 20 6e 6f 74 20 6c 6f  61 64 65 64 20 77 68 65  |s not loaded whe|
00000170  6e 20 74 68 65 20 41 50  49 20 69 73 6e 27 74 20  |n the API isn't |
00000180  62 65 69 6e 67 20 75 73  65 64 2c 0a 20 2a 20 61  |being used,. * a|
00000190  6e 64 20 64 6f 65 73 6e  27 74 20 77 61 73 74 65  |nd doesn't waste|
000001a0  20 72 65 73 6f 75 72 63  65 73 2e 20 57 68 65 6e  | resources. When|
000001b0  20 61 20 77 65 62 20 70  61 67 65 20 6f 72 20 77  | a web page or w|
000001c0  65 62 20 61 70 70 20 6d  61 6b 65 73 20 61 20 73  |eb app makes a s|
000001d0  70 65 65 63 68 0a 20 2a  20 72 65 71 75 65 73 74  |peech. * request|
000001e0  20 61 6e 64 20 74 68 65  20 70 61 72 61 6d 65 74  | and the paramet|
000001f0  65 72 73 20 6d 61 74 63  68 20 6f 6e 65 20 6f 66  |ers match one of|
00000200  20 74 68 65 20 76 6f 69  63 65 73 20 69 6e 20 74  | the voices in t|
00000210  68 69 73 20 65 78 74 65  6e 73 69 6f 6e 27 73 0a  |his extension's.|
00000220  20 2a 20 6d 61 6e 69 66  65 73 74 2c 20 69 74 20  | * manifest, it |
00000230  6d 61 6b 65 73 20 61 20  72 65 71 75 65 73 74 20  |makes a request |
00000240  74 6f 20 47 6f 6f 67 6c  65 27 73 20 41 50 49 20  |to Google's API |
00000250  75 73 69 6e 67 20 43 68  72 6f 6d 65 27 73 20 70  |using Chrome's p|
00000260  72 69 76 61 74 65 20 6b  65 79 0a 20 2a 20 61 6e  |rivate key. * an|
00000270  64 20 70 6c 61 79 73 20  74 68 65 20 72 65 73 75  |d plays the resu|
00000280  6c 74 69 6e 67 20 73 70  65 65 63 68 20 75 73 69  |lting speech usi|
00000290  6e 67 20 48 54 4d 4c 35  20 61 75 64 69 6f 2e 0a  |ng HTML5 audio..|
000002a0  20 2a 2f 0a 0a 2f 2a 2a  0a 20 2a 20 54 68 65 20  | */../**. * The |
000002b0  6d 61 69 6e 20 63 6c 61  73 73 20 66 6f 72 20 74  |main class for t|
000002c0  68 69 73 20 65 78 74 65  6e 73 69 6f 6e 2e 20 41  |his extension. A|
000002d0  64 64 73 20 6c 69 73 74  65 6e 65 72 73 20 74 6f  |dds listeners to|
000002e0  0a 20 2a 20 63 68 72 6f  6d 65 2e 74 74 73 45 6e  |. * chrome.ttsEn|
000002f0  67 69 6e 65 2e 6f 6e 53  70 65 61 6b 20 61 6e 64  |gine.onSpeak and|
00000300  20 63 68 72 6f 6d 65 2e  74 74 73 45 6e 67 69 6e  | chrome.ttsEngin|
00000310  65 2e 6f 6e 53 74 6f 70  20 61 6e 64 20 69 6d 70  |e.onStop and imp|
00000320  6c 65 6d 65 6e 74 73 0a  20 2a 20 74 68 65 6d 20  |lements. * them |
00000330  75 73 69 6e 67 20 47 6f  6f 67 6c 65 27 73 20 73  |using Google's s|
00000340  70 65 65 63 68 20 73 79  6e 74 68 65 73 69 73 20  |peech synthesis |
00000350  41 50 49 2e 0a 20 2a 2f  0a 63 6c 61 73 73 20 54  |API.. */.class T|
00000360  74 73 45 78 74 65 6e 73  69 6f 6e 20 7b 0a 20 20  |tsExtension {.  |
00000370  2f 2a 2a 0a 20 20 20 2a  20 49 6e 69 74 69 61 6c  |/**.   * Initial|
00000380  69 7a 65 73 20 64 61 74  61 20 73 74 72 75 63 74  |izes data struct|
00000390  75 72 65 73 20 61 6e 64  20 61 64 64 73 20 65 76  |ures and adds ev|
000003a0  65 6e 74 20 6c 69 73 74  65 6e 65 72 73 2e 0a 20  |ent listeners.. |
000003b0  20 20 2a 2f 0a 20 20 63  6f 6e 73 74 72 75 63 74  |  */.  construct|
000003c0  6f 72 28 29 20 7b 0a 20  20 20 20 2f 2a 2a 0a 20  |or() {.    /**. |
000003d0  20 20 20 20 2a 20 54 68  65 20 75 72 6c 20 70 72  |    * The url pr|
000003e0  65 66 69 78 20 6f 66 20  74 68 65 20 73 70 65 65  |efix of the spee|
000003f0  63 68 20 73 65 72 76 65  72 2c 20 69 6e 63 6c 75  |ch server, inclu|
00000400
